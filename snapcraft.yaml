name: epicpinball
version: "1.0-shareware"
summary: Epic Pinball shareware installer
description: |
  Epic Pinball is a collection of pinball games. This will install the shareware version with a single table. Buy the full version at GOG.com.
confinement: strict
grade: stable
base: core18

apps:
  epicpinball:
    command: desktop-launch $SNAP/launcher
    plugs:  [unity7, pulseaudio, opengl, network, x11]
    extensions: [gnome-3-28]

parts:
  launch:
    after: [ desktop-glib-only ]
    plugin: dump
    source: launcher
    stage-packages:
      - wget
      - unzip
      - yad
      - perl-base
    prime:
      - -share
      - -usr/share/doc
      - -usr/share/lintian
      - -usr/share/man

  dosbox-staging:
    source: https://github.com/dreamer/dosbox-staging.git
    plugin: autotools
    build-packages:
      - xvfb
      - libtool
      - build-essential
      - libsdl2-dev
      - libsdl2-net-dev
      - libncurses-dev
      - libopusfile-dev
    stage-packages:
      - libsdl2-2.0-0
      - libsdl2-net-2.0-0
      - libopusfile0
      - libglu1-mesa
      - libpng16-16

  desktop-glib-only:
    source: https://github.com/ubuntu/snapcraft-desktop-helpers.git
    source-subdir: glib-only
    plugin: make
    build-packages:
      - libglib2.0-dev
    stage-packages:
      - libglib2.0-bin

